$(function(){function e(){var e=t.basicFee;1==$("#Registration_has_entourage").val()&&(e+=t.entourageFee),$(".registration-events:checked").each(function(){e+=$(this).data("fee")}),e>0?n.removeClass("hide").find("#totalFee").text(e):n.addClass("hide")}var t=window.registrationOptions,n=(t.regulations,$("#fee"));$(document).on("change","#disclaimer",function(){$("#submit-button").prop("disabled",!this.checked)}).on("change",".registration-events",function(){e()}).on("change","#Registration_has_entourage",function(){$(".entourage-info")[1==this.value?"removeClass":"addClass"]("hide"),e()}).on("click","#submit-button",function(e){var n=$(".registration-events:checked"),a=[];if(n.each(function(){var e=$(this),n=e.val();t.unmetEvents[n]&&a.push(n)}),t.showRegulations||a.length>0){e.preventDefault();var i={};n.each(function(){var e=$(this),t=e.val();switch(t){case"333ft":case"clock":i[t]=!0;break;case"333bf":i.bf=!0;break;case"444bf":case"555bf":i.bf=!0,i.lbf=!0,i.bbf=!0;break;case"333mbf":i.bf=!0,i.lbf=!0}});var s=[];if(a.length>0&&(s.push(t.unmetEventsMessage),s.push("\n"),s.push(a.map(function(e){return $(".event-icon-"+e).attr("title")}).join(t.delimiter)),s.push("<hr>")),t.showRegulations){var o=$("<ol>");t.regulations.common.forEach(function(e){o.append($("<li>").html(e))}),$.each(t.regulations.special,function(e,t){i[e]&&o.append($("<li>").html(t))}),s.push("<h4>"+t.regulationDesc+"</h4>"),s.push($("<div>").append(o).html())}CubingChina.utils.confirm(s,{type:"type-warning"}).then(function(){$("#registration-form").submit()})}}),$(".registration-events").trigger("change"),$("#Registration_has_entourage").trigger("change"),$.each(t.unmetEvents,function(e,t){$('.registration-events[value="'+e+'"]').parent().addClass("bg-danger").data("qualifyingTime",t)})});